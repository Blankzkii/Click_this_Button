* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Quicksand', sans-serif;
    overflow: hidden;
}

.container {
    width: 100vw;
    height: 100vh;
    position: relative;
    background-color: #000000;
    transition: background-color 1.5s ease;
}

.instruction {
    position: absolute;
    top: 58%;
    left: 50%;
    transform: translateX(-50%);
    color: #d4a5a5;
    font-size: 18px;
    text-align: center;
    z-index: 2;
    opacity: 0;
    animation: fadeInGlow 8s cubic-bezier(0.22, 1, 0.36, 1) forwards 13s;
    text-shadow: 0 0 20px rgba(212, 165, 165, 0.8);
}

@keyframes fadeInGlow {
    0% {
        opacity: 0;
        text-shadow: 0 0 5px rgba(212, 165, 165, 0.3);
    }
    100% {
        opacity: 1;
        text-shadow: 0 0 20px rgba(212, 165, 165, 0.9);
    }
}

.heart {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    cursor: pointer;
    opacity: 0;
    animation: envelopeAppear 8s cubic-bezier(0.22, 1, 0.36, 1) forwards 13s;
}

@keyframes envelopeAppear {
    0% {
        transform: translate(-50%, -50%);
        opacity: 0;
    }
    100% {
        transform: translate(-50%, -50%);
        opacity: 1;
    }
}

.envelope {
    width: 80px;
    height: 80px;
    animation: glowPulse 3s ease-in-out infinite 2.5s;
}

.env-body {
    fill: white;
    stroke: #d4a5a5;
    stroke-width: 1.8;
}

.env-line {
    fill: none;
    stroke: #d4a5a5;
    stroke-width: 1.8;
    stroke-linecap: round;
    stroke-linejoin: round;
}

@keyframes glowPulse {
    0% {
        filter: drop-shadow(0 0 10px rgba(212, 165, 165, 0.4));
    }
    50% {
        filter: drop-shadow(0 0 30px rgba(212, 165, 165, 1)) drop-shadow(0 0 50px rgba(255, 182, 193, 0.6));
    }
    100% {
        filter: drop-shadow(0 0 10px rgba(212, 165, 165, 0.4));
    }
}

.message {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) scale(0);
    background-color: white;
    padding: 40px 50px;
    border-radius: 8px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    opacity: 0;
    transition: all 2s ease;
    z-index: 3;
}

.message::-webkit-scrollbar {
    width: 12px;
}

.message::-webkit-scrollbar-track {
    background: #fce4ec;
    border-radius: 10px;
    margin: 5px;
}

.message::-webkit-scrollbar-thumb {
    background: #ff9db5;
    border-radius: 10px;
    border: 2px solid #fce4ec;
}

.message::-webkit-scrollbar-thumb:hover {
    background: #ff7a9a;
}

.message {
    scrollbar-width: thin;
    scrollbar-color: #ff9db5 #fce4ec;
}

.message h1 {
    margin-bottom: 20px;
    color: #333;
    font-family: 'Cinzel', serif;
    opacity: 0;
    transform: translateY(20px);
    transition: all 3s ease;
}

.message p {
    line-height: 1.8;
    color: #555;
    font-size: 16px;
    opacity: 0;
    transform: translateY(20px);
    margin-bottom: 15px;
    text-align: justify;
    text-justify: inter-word; 
}

.sincere {
    margin-top: 20px;
    opacity: 0;
    transform: translateY(20px);
}

.sincere p {
    margin: 5px 0;
    opacity: 1;
    transform: none;
}

#messageState:checked ~ .container {
    background-color: rgb(252, 228, 236);
}

#messageState:checked ~ .container .heart {
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
    transition: all 0.8s ease;
}

#messageState:checked ~ .container .envelope {
    animation: none;
}

#messageState:checked ~ .container .message {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
}

#messageState:checked ~ .container .message h1 {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.3s;
}

#messageState:checked ~ .container .message .paragraph-1 {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s ease 0.6s;
}

#messageState:checked ~ .container .message .paragraph-2 {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s ease 1.2s;
}

#messageState:checked ~ .container .message .sincere {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s ease 1.8s;
}

#messageState:checked ~ .container .instruction {
    opacity: 0;
    transition: opacity 0.8s ease;
}

/* Rose Petals */
.petal {
    position: absolute;
    width: 10px;
    height: 10px;
    background: radial-gradient(ellipse at center, #ff9db5 0%, #ffb3c6 50%, #ffc4d6 100%);
    border-radius: 50% 0 50% 0;
    opacity: 0;
    pointer-events: none;
    z-index: 10;
}

@keyframes fall {
    0% {
        top: -100px;
        opacity: 0.8;
        transform: translateX(0) rotate(0deg);
    }
    25% {
        transform: translateX(15px) rotate(90deg);
    }
    50% {
        transform: translateX(-15px) rotate(180deg);
    }
    75% {
        transform: translateX(20px) rotate(270deg);
    }
    100% {
        top: 100vh;
        opacity: 0;
        transform: translateX(0) rotate(360deg);
    }
}

.petal:nth-child(1) { left: 10%; }
.petal:nth-child(2) { left: 20%; }
.petal:nth-child(3) { left: 30%; }
.petal:nth-child(4) { left: 40%; }
.petal:nth-child(5) { left: 50%; }
.petal:nth-child(6) { left: 60%; }
.petal:nth-child(7) { left: 70%; }
.petal:nth-child(8) { left: 80%; }
.petal:nth-child(9) { left: 90%; }
.petal:nth-child(10) { left: 15%; }
.petal:nth-child(11) { left: 25%; }
.petal:nth-child(12) { left: 35%; }
.petal:nth-child(13) { left: 45%; }
.petal:nth-child(14) { left: 55%; }
.petal:nth-child(15) { left: 65%; }
.petal:nth-child(16) { left: 75%; }
.petal:nth-child(17) { left: 85%; }
.petal:nth-child(18) { left: 95%; }
.petal:nth-child(19) { left: 5%; }
.petal:nth-child(20) { left: 50%; }

#messageState:checked ~ .container .petal:nth-child(1) { animation: fall 8s linear infinite; animation-delay: 0s; }
#messageState:checked ~ .container .petal:nth-child(2) { animation: fall 10s linear infinite; animation-delay: 0.5s; }
#messageState:checked ~ .container .petal:nth-child(3) { animation: fall 9s linear infinite; animation-delay: 1s; }
#messageState:checked ~ .container .petal:nth-child(4) { animation: fall 11s linear infinite; animation-delay: 1.5s; }
#messageState:checked ~ .container .petal:nth-child(5) { animation: fall 8.5s linear infinite; animation-delay: 2s; }
#messageState:checked ~ .container .petal:nth-child(6) { animation: fall 10.5s linear infinite; animation-delay: 0.3s; }
#messageState:checked ~ .container .petal:nth-child(7) { animation: fall 9.5s linear infinite; animation-delay: 0.8s; }
#messageState:checked ~ .container .petal:nth-child(8) { animation: fall 11.5s linear infinite; animation-delay: 1.3s; }
#messageState:checked ~ .container .petal:nth-child(9) { animation: fall 8.8s linear infinite; animation-delay: 1.8s; }
#messageState:checked ~ .container .petal:nth-child(10) { animation: fall 10.2s linear infinite; animation-delay: 2.3s; }
#messageState:checked ~ .container .petal:nth-child(11) { animation: fall 9.2s linear infinite; animation-delay: 0.2s; }
#messageState:checked ~ .container .petal:nth-child(12) { animation: fall 11.2s linear infinite; animation-delay: 0.7s; }
#messageState:checked ~ .container .petal:nth-child(13) { animation: fall 8.7s linear infinite; animation-delay: 1.2s; }
#messageState:checked ~ .container .petal:nth-child(14) { animation: fall 10.7s linear infinite; animation-delay: 1.7s; }
#messageState:checked ~ .container .petal:nth-child(15) { animation: fall 9.7s linear infinite; animation-delay: 2.2s; }
#messageState:checked ~ .container .petal:nth-child(16) { animation: fall 11.7s linear infinite; animation-delay: 0.4s; }
#messageState:checked ~ .container .petal:nth-child(17) { animation: fall 8.3s linear infinite; animation-delay: 0.9s; }
#messageState:checked ~ .container .petal:nth-child(18) { animation: fall 10.3s linear infinite; animation-delay: 1.4s; }
#messageState:checked ~ .container .petal:nth-child(19) { animation: fall 9.3s linear infinite; animation-delay: 1.9s; }
#messageState:checked ~ .container .petal:nth-child(20) { animation: fall 11.3s linear infinite; animation-delay: 2.4s; }

/* Music Toggle Button */
.music-toggle {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: white;
    border: 2px solid #d4a5a5;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(212, 165, 165, 0.3);
    opacity: 0;
    transform: scale(0);
}

#messageState:checked ~ .container .music-toggle {
    opacity: 1;
    transform: scale(1);
    transition: all 0.5s ease 2s;
}

.music-toggle:hover {
    background: #d4a5a5;
    transform: scale(1.1);
}

.music-toggle:hover .music-icon,
.music-toggle:hover .music-off-icon {
    stroke: white;
}

.music-icon,
.music-off-icon {
    width: 24px;
    height: 24px;
    stroke: #d4a5a5;
    transition: stroke 0.3s ease;
}

.music-toggle:hover .music-icon,
.music-toggle:hover .music-off-icon {
    stroke: rgb(0, 0, 0);
}

.pre-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-family: 'Cinzel', serif;
    font-size: 22px;
    text-align: center;
    line-height: 1.8;
    max-width: 80%;
    z-index: 5;
    pointer-events: none;

    opacity: 0;
    animation: preMessageContainerFade 12s ease forwards;
}

/* Individual lines */
.pre-message .line {
    display: inline-block;
    opacity: 0;
    transform: translateY(14px);
    animation: lineReveal 3.2s ease forwards;
}

/* Slower heartbeat timing */
.pre-message .line-1 { animation-delay: 1.5s; }
.pre-message .line-2 { animation-delay: 4.0s; }
.pre-message .line-3 { animation-delay: 6.5s; }

/* Line reveal synced to pulse */
@keyframes lineReveal {
    0% {
        opacity: 0;
        transform: translateY(14px);
        text-shadow: none;
    }
    45% {
        opacity: 1;
        text-shadow:
            0 0 18px rgba(255, 255, 255, 0.6),
            0 0 40px rgba(255, 182, 193, 0.85);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
        text-shadow:
            0 0 12px rgba(255, 255, 255, 0.4),
            0 0 28px rgba(255, 182, 193, 0.6);
    }
}

/* Fade the whole message in and out slowly */
@keyframes preMessageContainerFade {
    0%   { opacity: 0; }
    15%  { opacity: 1; }
    80%  { opacity: 1; }
    100% { opacity: 0; }
}